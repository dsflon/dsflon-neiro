function init(){playBtn=document.getElementById("playBtn"),stopBtn=document.getElementById("stopBtn"),userMediaBtn=document.getElementById("userMediaBtn"),file=document.getElementById("file"),fileWrap=document.getElementById("fileWrap"),volumeBtn=document.getElementById("volumeBtn"),loading=document.getElementById("loading"),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.AudioContext=window.AudioContext||window.webkitAudioContext,audioContext=new AudioContext,navigator.getUserMedia||(userMediaBtn.className="disabled"),file.addEventListener("change",function(e){fileReader.readAsArrayBuffer(e.target.files[0])}),analyser=audioContext.createAnalyser(),analyser.fftSize=FFT_SIZE,analyser.smoothingTimeConstant=SMOOTHING,WIDTH=window.innerWidth,HEIGHT=window.innerHeight,canvas=document.getElementById("visualizer"),canvasContext=canvas.getContext("2d"),canvas.width=WIDTH,canvas.height=HEIGHT}function resize(){WIDTH=window.innerWidth,HEIGHT=window.innerHeight,canvas.width=WIDTH,canvas.height=HEIGHT}var playBtn,stopBtn,file,fileWrap,volumeBtn,loading,userMediaBtn,userAgent=window.navigator.userAgent.toLowerCase(),appVersion=window.navigator.appVersion.toLowerCase(),audioContext,audioBuffer,noteBuffer,fileReader=new FileReader,analyser,startOffset=0,startTime=0,gainNode,WIDTH,HEIGHT,canvas,canvasContext,animationId;window.onload=init,window.onresize=resize;